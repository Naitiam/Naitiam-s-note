Eslint + prettier + husky + lint-staged来完成对一个项目的整体配置

> [基于 Vue 项目前端团队推行代码规范及代码质量，我就简单几步搞定](https://juejin.cn/post/7068573328914513928)

## 涉及插件



## 安装ESlint

```
pnpm i eslint -g
```

通过 `npx eslint --init` 命令，选择配置，创建 `.eslintrc` 配置文件

会出现一些选项

1. 何使用ESLint？

   - To check syntax only

   - To check syntax and find problems
   - To check syntax, find problems, and enforce code style

2. 使用哪种类型的模?

   - JavaScript modules (import/export)

   - CommonJS (require/exports)
   - None of these

3. 使用哪种框架?

   - React

   - Vue.js
   - None of these

4. 是否使用TS?

   - Does your project use TypeScript?

5. 你的代码在哪里运行?

   - Browser

   - Node

6. 选择配置文件类型?

   - JavaScript

   - YAML
   - JSON

7. 通过什么方式下载?

   - Would you like to install them now with npm?

![image-20230716212604438](G:\Naitiam-s-note\前端项目总结\img\前端工程规范化.assets\image-20230716212604438.png)

也可不通过命令自建 `.eslintrc.js` 配置文件 ，配置以下内容(该内容来自掘金前端项目大佬)

```javascript
module.exports = {
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  extends: [
    'eslint:recommended',
    'plugin:vue/vue3-essential',
    'plugin:@typescript-eslint/recommended',
    'plugin:prettier/recommended',
  ],
  overrides: [],
  parser: 'vue-eslint-parser',
  parserOptions: {
    ecmaVersion: 'latest',
    parser: '@typescript-eslint/parser',
    sourceType: 'module',
  },
  plugins: ['vue', '@typescript-eslint'],
  rules: {
    '@typescript-eslint/indent': ['error', 2],
    'linebreak-style': ['error', 'unix'],
    quotes: ['error', 'single'],
    semi: ['error', 'always'],
    'vue/multi-word-component-names': 0,
    '@typescript-eslint/no-explicit-any': 0,
  },
};

```

> 虽然vscode插件也可以单独配置格式，但是如果项目中有`.eslintrc.js`文件，那么eslint插件会优先执行`.eslintrc.js`文件的配置。

忽略校验的文件 `.eslintignore`

```
node_modules
src/assets
build
public
dist
```

## 安装Prettier

```
pnpm i prettier -D
```

`.prettierrc.js`  配置文件

```
module.exports = {
  arrowParens: 'always', // 只有一个参数的箭头函数的参数是否带圆括号（默认avoid:添加括号）
  bracketSameLine: false, // 对于多行结构（如对象或数组），括号是否与起始位置放在同一行
  bracketSpacing: true, // 在对象，数组括号与文字之间加空格 "{ foo: bar }"（默认true）
  embeddedLanguageFormatting: 'auto', // 是否对嵌入语言进行格式化。
  htmlWhitespaceSensitivity: 'css', // 根据显示样式决定 html 要不要折行
  insertPragma: false, // 是否在文件顶部插入格式化的指令。
  jsxSingleQuote: false, // jsx 不使用单引号，而使用双引号
  printWidth: 120, // 一行最多 120 字符(默认80)
  proseWrap: 'never', // 是否在 markdown 文件中处理换行。
  quoteProps: 'as-needed',  // 对象的 key 仅在必要时用引号
  requirePragma: false, // 是否在 markdown 文件中处理换行。
  semi: true, // 行尾需要有分号(默认true)
  singleQuote: true, // 是否使用单引号。
  tabWidth: 2,  // 每个tab相当于多少个空格（默认2）
  trailingComma: 'all', // 多行使用拖尾逗号（默认none）
  useTabs: false, // 是否使用tab进行缩进（默认false）
  vueIndentScriptAndStyle: false, // 在 Vue 文件中是否缩进 <script> 和 <style> 标签的内容。
  singleAttributePerLine: false, // 对于 HTML、JSX 属性，是否每个属性都放在单独的行上。
};
```

`.prettierignore`

```
.husky
.vscode
assets
node_modules
```

## ESLint和Prettier

1. ESLint是**js**代码的质量检查工具，同时也具备一定的代码风格的格式化能力。
2. Prettier是一个**代码风格**的约束工具，Prettier能约束JS、JSX、TypeScript、Vue、CSS、Less、SCSS、HTML、JSON、Markdown等代码风格。

总结：**eslint和prettier这俩兄弟一个保证js代码质量，一个保证代码美观。**

### ESLint和Prettier冲突

如：

- ESLint默认语句结尾不加分号，Prettier默认语句结尾加分号；
- ESLint默认强制使用单引号，Prettier默认使用双引号；
- ESLint默认句末减少不必要的逗号，Prettier默认尽可能多使用逗号。

**解决冲突问题**

- eslint-config-prettier：禁用掉了一些不必要的以及和 Prettier 相冲突的 ESLint 规则；
- eslint-plugin-prettier：将 prettier 作为 ESLint 的规则来使用，相当于代码不符合 Prettier 的标准时，会报一个 ESLint 错误，同时也可以通过 eslint --fix 来进行格式化；这样就相当于将 Prettier 整合进了 ESLint 中；

```
npm i eslint @vue/eslint-config-prettier eslint-config-prettier eslint-plugin-prettier eslint-plugin-vue prettier -D
```

